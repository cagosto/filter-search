"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var FILTER=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),_initialiseProps.call(this);var i=_defineProperty({displayFilter:null,filterList:[],keyboardActive:!1,holder:"",filter:"",searchInput:"",activeKeyClass:""},"keyboardActive",!1),r=_extends({},i,e),s=r.displayFilter,n=r.filter,l=r.holder,a=r.searchInput,o=r.filterList,c=r.activeKeyClass,u=r.keyboardActive;this.displayFilter=s,this.filter=document.querySelector(n),this.filterHolder=this.filter.querySelector(l),this.filterItems=o,this.searchBox=document.querySelector(a),this.totalItems=o.length,this.activeKeyClass=c,this.keyboardActive=u,this.events(),this.filterHolder.innerHTML=this.templet(this.filterItems)}return _createClass(t,[{key:"events",value:function(){null!==this.displayFilter&&(this.searchBox.addEventListener("click",this.openEvt,!1),this.searchBox.addEventListener("keyup",this.filterEvt,!1)),document.body.addEventListener("click",this.closeEvt,!1),this.filterHolder.addEventListener("click",this.changeCopy,!1)}},{key:"activeKeySettings",value:function(t){var e=this.totalItems,i=this.filterHolder,r=this.activeKeyClass,s=i.children,n=i.querySelector("."+r);this.count=40===t?this.count!==e-1?++this.count:0:0!==this.count?--this.count:e-1,n&&n.classList.remove(r),s[this.count].classList.add(r)}}]),t}(),_initialiseProps=function(){var t=this;this.count=-1,this.keyList=[38,40,37,39,13,91],this.templet=function(t){return t.map(function(t){return"<button data-val="+t+">"+t+"</button>"}).join("")},this.changeCopy=function(e){e.target.matches("button")&&(t.searchBox.value=e.target.innerHTML)},this.openEvt=function(e){e.stopPropagation(),t.filter.classList.add(t.displayFilter)},this.closeEvt=function(e){t.filter.classList.remove(t.displayFilter),t.count=-1},this.filterEvt=function(e){var i=e.which,r=e.currentTarget.value.toLowerCase();t.keyList.indexOf(i)<0&&(t.count=-1,t.filterHolder.innerHTML=t.templet(t.filterDisplay(r))),!t.keyboardActive||40!==i&&38!==i||t.activeKeySettings(i)},this.filterDisplay=function(e){var i=t.filterItems.filter(function(t){return t.toLowerCase().substring(0,e.length)===e});return t.totalItems=i.length,i}};exports.default=FILTER;